<%- include('./partials/header.ejs') %>
    <link rel="stylesheet" type="text/css" href="/css/homepage.css" />
    <link rel="stylesheet" type="text/css" href="/css/projects.css" />
    <title>Snyk Demo App</title>
  </head>
  <body>
    <%- include('./partials/topnav.ejs') %>

    <div class="projects-page">
      <ul class="sidebar-nav">
        <!-- TODO add nav links and update select to be dynamic -->
        <li class="sidebar-nav__item sidebar-nav__item-selected">
          <img
            class="sidebar-nav__icon"
            src="images/book-multiple.svg"
            alt=""
          />
          <p class="sidebar-nav__text" onclick="location.href='/projects';">Projects</p>
        </li>
        <li class="sidebar-nav__item">
          <img class="sidebar-nav__icon" src="images/cog.svg" alt="" />
          <p class="sidebar-nav__text" onclick="location.href='/settings';">Settings</p>
        </li>
        <li class="sidebar-nav__item">
          <img class="sidebar-nav__icon" src="images/wrench.svg" alt="" />
          <p class="sidebar-nav__text" onclick="location.href='/admin';">Admin</p>
        </li>
      </ul>
      <div class="projects-page__content">
        <div class="projects-page__description">
          <img class="projects-page__logo" src="images/avatar.svg" alt="" />
          <div class="projects-page__heading">
            <h1 class="projects-page__title">Demo App</h1>
            <p class="projects-page__text">List of all your projects</p>
          </div>
        </div>

        <h2 class="projects-page__sub-heading">Projects</h2>
        <% if (!projects || projects.length === 0 ) { %>
          <div class="card">No projects available</div>
          <% } else { %>
        <% for(var i=0; i < projects.length; i++){ %>
        <div class="card">
          <h3 class="card__heading projects-page__card-heading">
            Project Name: <%= projects[i].name %>
          </h3>
          <div class="projects-page__card">
            <div>
              <p class="card__text projects-page__card-text">
                Project ID: <%= projects[i].id %>
              </p>
              <p class="card__text projects-page__card-text">
                Origin: <%= projects[i].origin %>
              </p>
              <p class="card__text projects-page__card-text">
                Type: <%= projects[i].type %>
              </p>
              <a
                class="link-button project-page__link-button"
                href="<%= projects[i].browseUrl %>"
              >
                <img
                  src="images/book-multiple.svg"
                  alt=""
                  class="link-button-icon"
                />
                View in Snyk
              </a>
            </div>
            <div>
              <p class="card__text projects-page__card-text">
                Test Frequency: <%= projects[i].testFrequency %>
              </p>
              <p class="card__text projects-page__card-text">
                Monitored: <%= projects[i].isMonitored %>
              </p>
              <p class="card__text projects-page__card-text">
                Last Test Date: <%= projects[i].lastTestedDate %>
              </p>
            </div>
          </div>
        </div>
        <% } %>
      </div>
    </div>
    <% } %>
    <%- include('./partials/footer.ejs') %>